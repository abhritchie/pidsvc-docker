version: '2'

services:
        postgres:
            build:
                context: .
                dockerfile: Dockerfile-PostgreSQL
            volumes:
                - /OSM/MEL/LW_OZNOME/apps/PIDsvc/PIDsvc_db:/var/lib/postgresql/data
            network_mode: "bridge"
        # apache:
        #     build:
        #         image: httpd
        #     network_mode: "bridge"
        tomcat2:
            build:
                context: .
                dockerfile: Dockerfile-Tomcat
            links:
                - postgres:postgres
            ports:
                - "8093:8080"
                - "8094:8009"
            network_mode: "bridge"
        apache:
            build:
                context: .
                dockerfile: Dockerfile-Apache
            links:
                - tomcat:tomcat2
            ports:
                - "8095:80"
            network_mode: "bridge"
